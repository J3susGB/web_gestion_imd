document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".auto_aceptar").forEach(t=>{t.addEventListener("click",(async function(t){t.preventDefault();const e=this.closest(".partidos__partido");if(!e)return void alert("Error: No se pudo encontrar el contenedor del partido.");const o=e.querySelector('input[name="id_arbi"]');if(!o)return void alert("Error: No se encontró el input del árbitro.");const r=o.value,n=e.querySelector('input[name="id"]').value;localStorage.setItem("scrollToPartidoId",n);try{const t=await fetch("/admin/partidos/autoaceptar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arbitro:r,partido:n})}),e=await t.text();try{const o=JSON.parse(e);t.ok&&o.success?(alert(o.message||"¡Partido confirmado correctamente!"),location.reload()):alert(o.message||"Hubo un error al procesar la solicitud.")}catch(t){console.error("Error al procesar la respuesta del servidor:",e,t),alert("Error en la comunicación con el servidor.")}}catch(t){console.error("Error en la comunicación con el servidor:",t),alert("Error en la comunicación con el servidor.")}}))});const t=localStorage.getItem("scrollToPartidoId");if(t){const e=document.querySelector(`.partidos__partido[data-partido-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"start"}),localStorage.removeItem("scrollToPartidoId")}}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".borrar").forEach(t=>{t.addEventListener("click",(async function(t){t.preventDefault();const e=this.closest(".partidos__partido");if(!e)return void alert("Error: No se pudo encontrar el contenedor del partido.");const o=e.querySelector('input[name="id_arbi"]');if(!o)return void alert("Error: No se encontró el input del árbitro.");const r=o.value,n=e.querySelector('input[name="id"]').value;localStorage.setItem("scrollToPartidoId",n);try{const t=await fetch("/admin/partidos/borrar_nombramiento",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arbitro:r,partido:n})}),e=await t.text();try{const o=JSON.parse(e);t.ok&&o.success?(alert(o.message||"¡Árbitro borrado correctamente!"),location.reload()):alert(o.message||"Hubo un error al procesar la solicitud.")}catch(t){console.error("Error al procesar la respuesta del servidor:",e,t),alert("Error en la comunicación con el servidor.")}}catch(t){console.error("Error en la comunicación con el servidor:",t),alert("Error en la comunicación con el servidor.")}}))});const t=localStorage.getItem("scrollToPartidoId");if(t){const e=document.querySelector(`.partidos__partido[data-partido-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"start"}),localStorage.removeItem("scrollToPartidoId")}}),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".botones__scroll"),e=window.matchMedia("(min-width: 600px)");let o;t.style.top="43.2rem",t.style.bottom="auto",window.addEventListener("scroll",(function(){const r=window.scrollY,n=document.documentElement.scrollHeight,a=r+document.documentElement.clientHeight>=n-5;0===r?(console.log("Estamos en la parte superior"),t.style.top="43.2rem",t.style.bottom="auto"):a?(console.log("Estamos en la parte inferior"),t.style.bottom=e.matches?"8rem":"16rem",t.style.top="auto"):(console.log("Estamos desplazándonos"),t.style.top="auto",t.style.bottom="2rem"),t.classList.add("hidden"),clearTimeout(o),o=setTimeout(()=>{t.classList.remove("hidden")},300)}));const r=document.getElementById("arriba"),n=document.getElementById("abajo");r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),n.addEventListener("click",()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})})),document.addEventListener("DOMContentLoaded",(function(){function t(){const t=document.querySelectorAll(".arbitros__card");document.querySelector(".contar_arbitros h3").textContent=t.length+" personas"}t();document.querySelectorAll('input[type="text"], input[type="radio"], button').forEach(e=>{e.addEventListener("change",(function(){t()}))})})),document.addEventListener("DOMContentLoaded",(function(){function t(){const t=document.querySelectorAll(".partidos__partido"),e=Array.from(t).filter(t=>null!==t.offsetParent&&!t.classList.contains("partidos__filtro")&&t.querySelector(".partidos__partido--id"));document.querySelector(".contar_partidos h3").textContent=e.length+" partidos"}t();document.querySelectorAll('input[type="text"], input[type="radio"], select, button.partidos__boton-filtro').forEach(e=>{e.addEventListener("change",(function(){t()}))});const e=document.querySelector(".partidos__boton-filtro");e&&e.addEventListener("click",(function(){document.querySelectorAll('input[type="text"]').forEach(t=>t.value=""),document.querySelectorAll('input[type="radio"]').forEach(t=>t.checked=!1),document.querySelectorAll("select").forEach(t=>t.selectedIndex=0),t()}))})),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".send").forEach(t=>{t.addEventListener("click",(async function(t){t.preventDefault();const e=this.closest(".partidos__partido");if(!e)return void alert("Error: No se pudo encontrar el contenedor del partido.");const o=e.querySelector('input[name="id_arbi"]');if(!o)return void alert("Error: No se encontró el input del árbitro.");const r=o.value,n=e.querySelector('input[name="id"]').value;localStorage.setItem("scrollToPartidoId",n),await async function(t,e){try{const o=await fetch("/admin/partidos/enviar_partido",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arbitro:e,partido:t})});if(!o.ok)return void alert("Error en el servidor.");const r=await o.json();r.success?(alert(r.message||"¡Partido designado y enviado!"),location.reload()):alert(r.message||"Hubo un error al enviar los datos.")}catch(t){console.error("Error en la comunicación con el servidor:",t),alert("Error en la comunicación con el servidor.")}}(n,r)}))});const t=localStorage.getItem("scrollToPartidoId");if(t){const e=document.querySelector(`.partidos__partido[data-partido-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"start"}),localStorage.removeItem("scrollToPartidoId")}}),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelectorAll(".negacion"),e=document.createElement("div");e.classList.add("modal-hover"),document.body.appendChild(e),t.forEach(t=>{t.addEventListener("mouseenter",(function(o){!function(t,o){const r=o.getBoundingClientRect(),n=o.getAttribute("data-observaciones")||"Sin observaciones";e.textContent=n,e.style.left=r.left+window.scrollX-10+"px",e.style.top=r.top+window.scrollY-5+"px",e.style.display="block"}(0,t)})),t.addEventListener("mouseleave",(function(){e.style.display="none"}))})})),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".save").forEach(t=>{t.addEventListener("click",(async function(t){t.preventDefault();const e=this.closest(".partidos__partido");if(!e)return void alert("Error: No se pudo encontrar el contenedor del partido.");const o=e.querySelector(".partidos__partido--arbitro");if(!o)return void alert("Error: No se encontró el input del árbitro.");const r=o.querySelector(".arbitro_autocomplete");if(!r||!r.hasAttribute("data-arbitro-id"))return void alert("Por favor, selecciona un árbitro de la lista antes de guardar.");const n=r.getAttribute("data-arbitro-id"),a=this.closest("form").querySelector('input[name="id"]').value;localStorage.setItem("scrollToPartidoId",a),await async function(t,e){try{const o=await fetch("/admin/partidos/nombrar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arbitro:e,partido:t})}),r=await o.text();if(!o.ok)return void alert("Error en el servidor.");const n=JSON.parse(r);if(n.success){const t=n.message||"¡Árbitro guardado correctamente!";alert(t),location.reload()}else alert(n.message||"Hubo un error al guardar los datos.")}catch(t){alert("Error en la comunicación con el servidor.")}}(a,n)}))});const t=localStorage.getItem("scrollToPartidoId");if(t){const e=document.querySelector(`.partidos__partido[data-partido-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"start"}),localStorage.removeItem("scrollToPartidoId")}}),document.addEventListener("DOMContentLoaded",(function(){document.body.addEventListener("input",(function(t){if(t.target&&"arbitro_autocomplete"===t.target.id){const e=t.target,o=e.nextElementSibling,r=e.value.trim();r.length>=2?fetch("/admin/partidos/autocompletar_arbitros",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"q="+encodeURIComponent(r)}).then(t=>{if(!t.ok)throw new Error("Error HTTP: "+t.status);return t.json()}).then(t=>{console.log("Respuesta del servidor:",t),o.innerHTML="",t.length>0?t.forEach(t=>{const r=document.createElement("li");r.textContent=`${t.apellido1} ${t.apellido2}, ${t.nombre}`,r.setAttribute("data-id",t.id),o.appendChild(r),r.addEventListener("click",(function(){e.value=`${t.apellido1} ${t.apellido2}, ${t.nombre}`,e.setAttribute("data-arbitro-id",t.id),o.innerHTML=""}))}):o.innerHTML="<li>No se encontraron árbitros.</li>"}).catch(t=>{console.error("Error al obtener los árbitros:",t),o.innerHTML=`<li>Error: ${t.message}</li>`}):o.innerHTML=""}})),document.addEventListener("click",(function(t){if(!t.target.closest(".partidos__campo")){document.querySelectorAll(".autocomplete-suggestions").forEach(t=>{t.innerHTML=""})}}))})),document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".alert");const t=document.querySelector(".alert");t.addEventListener("click",(function(){t.classList.add("mostrar_sweet"),Swal.fire({icon:"success",title:"¡Hecho!",background:"#4e4d4b",color:"#DDDDDD",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-button"},showConfirmButton:!0,confirmButtonColor:"#71B100",timer:3e3}),setTimeout((function(){t.classList.remove("mostrar_sweet")}),100)}))}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".alert2").forEach(t=>{t.addEventListener("click",(function(t){const e=this.closest("form");e.querySelector('input[name="id"]').value;Swal.fire({title:"Al pulsar Sí, el contenido será eliminado, ¿Desea confirmar?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No",confirmButtonColor:"#71B100",cancelButtonColor:"#F05454",backdrop:!0,background:"#4e4d4b",color:"#DDDDDD",icon:"warning",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-button",cancelButton:"custom-button"}}).then(t=>{t.isConfirmed&&e.submit()})}))})}),document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".alert3").addEventListener("click",(function(){Swal.fire({title:"Al pulsar Sí, se eliminarán todos los registros, ¿Desea continuar?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No",confirmButtonColor:"#71B100",cancelButtonColor:"#F05454",backdrop:!0,background:"#4e4d4b",color:"#DDDDDD",icon:"warning",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-button",cancelButton:"custom-button"}}).then(t=>{if(t.isConfirmed){this.closest("form").submit()}})}))}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".alert4").forEach(t=>{t.addEventListener("click",(function(t){t.preventDefault();const e=this.closest("form");Swal.fire({title:"Al pulsar Sí, el partido será eliminado, ¿Desea confirmar?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No",confirmButtonColor:"#71B100",cancelButtonColor:"#F05454",backdrop:!0,background:"#4e4d4b",color:"#DDDDDD",icon:"warning"}).then(t=>{t.isConfirmed&&fetch(e.action,{method:"POST",body:new FormData(e)}).then(t=>t.json()).then(t=>{t.success?Swal.fire({title:"Eliminado",text:"El partido ha sido eliminado.",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#71B100",background:"#4e4d4b",color:"#DDDDDD",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-button"}}).then(()=>{window.location.href="/admin/partidos"}):Swal.fire({title:"Error",text:t.message,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#F05454",background:"#4e4d4b",color:"#DDDDDD",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-button"}})}).catch(t=>{Swal.fire({title:"Error",text:"Algo salió mal.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#F05454",background:"#4e4d4b",color:"#DDDDDD",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-button"}})})})}))})}),document.querySelectorAll(".toogle_check").forEach(t=>{t.addEventListener("change",(async function(){const t=this.getAttribute("data-id"),e=this.checked?1:0;try{const o=await fetch("/admin/perfiles/actualizar-estado",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,activo:e})});(await o.json()).success||(alert("Error actualizando el estado"),this.checked=!this.checked)}catch(t){alert("Error en el servidor"),this.checked=!this.checked}}))}),document.querySelectorAll(".check_arbis").forEach(t=>{t.addEventListener("change",(async function(){const t=this.getAttribute("data-id"),e=this.checked?1:0;try{const o=await fetch("/admin/arbitros/actualizar-estado",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,activo:e})});if(!o.ok)throw new Error("Error en la respuesta del servidor");(await o.json()).success?this.checked=1===e:(alert("Error actualizando el estado"),this.checked=!this.checked)}catch(t){console.error("Error en la comunicación con el servidor:",t),alert("Error en el servidor"),this.checked=!this.checked}}))}),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelectorAll(".modi"),e=document.createElement("div");e.classList.add("modal-hover-modi"),document.body.appendChild(e),t.forEach(t=>{t.addEventListener("mouseenter",(function(o){!function(t,o){const r=o.getBoundingClientRect(),n=o.getAttribute("data-observaciones")||"Sin observaciones";e.textContent=n,e.style.left=r.left+window.scrollX+35+"px",e.style.top=r.top+window.scrollY-5+"px",e.style.display="block"}(0,t)})),t.addEventListener("mouseleave",(function(){e.style.display="none"}))})}));
//# sourceMappingURL=bundle.js.map
